<!--
@component
Renders a card type icon for Asset, Event, or Skill card types.
The icon can be colored using Tailwind classes via the `class` prop.
Takes up fixed width (w-5) to ensure consistent spacing even when card type doesn't match.
-->
<script lang="ts">
	import { CardType } from '@5argon/arkham-kohaku';
	import clsx from 'clsx';

	interface Prop {
		cardType?: CardType;
		class?: string;
		/**
		 * If true, unsupported card types will not reserve space (no w-2 container)
		 */
		noReserveCardTypeIcon?: boolean;
	}

	const { cardType, class: className, noReserveCardTypeIcon = false }: Prop = $props();

	const shouldRender = $derived(
		cardType === CardType.Asset || cardType === CardType.Event || cardType === CardType.Skill
	);
	const shouldRenderContainer = $derived(
		shouldRender && !noReserveCardTypeIcon
	);
	const containerClass = $derived(
		clsx('inline-block w-2 h-3 shrink-0', className)
	);
</script>

{#if shouldRenderContainer}
	<div class={containerClass}>
		{#if shouldRender}
			{#if cardType === CardType.Asset}
		<!-- Asset icon: Circle -->
		<svg viewBox="0 0 403 541" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
			<g transform="matrix(1,0,0,1,-1738,-95)">
				<g transform="matrix(1.62412,0,0,1,0,0)">
					<g transform="matrix(1,0,0,1,992.539,0)">
						<g transform="matrix(0.615719,0,0,1,0,0)">
							<g transform="matrix(1.59493,0,0,1.56803,-302.91,-224.078)">
								<path
									d="M521.079,252.493L521.079,499.507L520.1,509.358L517.28,518.591L512.832,526.922L506.966,534.154L499.856,540.121L491.666,544.645L482.589,547.513L472.903,548.51L317.097,548.51L307.411,547.513L298.334,544.645L290.144,540.121L283.034,534.154L277.168,526.922L272.72,518.591L269.9,509.358L268.921,499.507L268.921,252.493L269.9,242.642L272.72,233.409L277.168,225.078L283.034,217.846L290.144,211.879L298.334,207.355L307.411,204.487L317.097,203.49L472.903,203.49L482.589,204.487L491.666,207.355L499.856,211.879L506.966,217.846L512.832,225.078L517.28,233.409L520.1,242.642L521.079,252.493ZM496,252.493C496,239.527 485.651,229 472.903,229L317.097,229C304.349,229 294,239.527 294,252.493L294,499.507C294,512.473 304.349,523 317.097,523L472.903,523C485.651,523 496,512.473 496,499.507L496,252.493Z"
									class="fill-current"
								/>
							</g>
							<g transform="matrix(1.19324,0,0,1.22051,-88.1612,-97.2615)">
								<path
									d="M348,204.227C443.371,204.227 516.522,265.621 516.522,334.5C516.522,403.379 443.371,464.773 348,464.773C252.629,464.773 179.478,403.379 179.478,334.5C179.478,265.621 252.629,204.227 348,204.227ZM348,237C273.491,237 213,280.688 213,334.5C213,388.312 273.491,432 348,432C422.509,432 483,388.312 483,334.5C483,280.688 422.509,237 348,237Z"
									class="fill-current"
								/>
							</g>
						</g>
					</g>
				</g>
			</g>
		</svg>
	{:else if cardType === CardType.Event}
		<!-- Event icon: Diamond -->
		<svg viewBox="0 0 403 541" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
			<g transform="matrix(1,0,0,1,-2239.04,-95)">
				<g transform="matrix(1.62412,0,0,1,0,0)">
					<g transform="matrix(1,0,0,1,992.539,0)">
						<g transform="matrix(0.615719,0,0,1,308.497,0)">
							<g transform="matrix(1.59493,0,0,1.56803,-302.91,-224.078)">
								<path
									d="M521.079,252.493L521.079,499.507L520.1,509.358L517.28,518.591L512.832,526.922L506.966,534.154L499.856,540.121L491.666,544.645L482.589,547.513L472.903,548.51L317.097,548.51L307.411,547.513L298.334,544.645L290.144,540.121L283.034,534.154L277.168,526.922L272.72,518.591L269.9,509.358L268.921,499.507L268.921,252.493L269.9,242.642L272.72,233.409L277.168,225.078L283.034,217.846L290.144,211.879L298.334,207.355L307.411,204.487L317.097,203.49L472.903,203.49L482.589,204.487L491.666,207.355L499.856,211.879L506.966,217.846L512.832,225.078L517.28,233.409L520.1,242.642L521.079,252.493ZM496,252.493C496,239.527 485.651,229 472.903,229L317.097,229C304.349,229 294,239.527 294,252.493L294,499.507C294,512.473 304.349,523 317.097,523L472.903,523C485.651,523 496,512.473 496,499.507L496,252.493Z"
									class="fill-current"
								/>
							</g>
							<g transform="matrix(0.519038,-0.519038,0.519038,0.519038,-532.44,766.718)">
								<path
									d="M1474.49,236L1474.49,494C1474.49,524.096 1450.1,548.494 1420,548.494L1162,548.494C1131.9,548.494 1107.51,524.096 1107.51,494L1107.51,236C1107.51,205.904 1131.9,181.506 1162,181.506L1420,181.506C1450.1,181.506 1474.49,205.904 1474.49,236ZM1420,236L1162,236L1162,494L1420,494L1420,236Z"
									class="fill-current"
								/>
							</g>
						</g>
					</g>
				</g>
			</g>
		</svg>
	{:else if cardType === CardType.Skill}
		<!-- Skill icon: Hand -->
		<svg viewBox="0 0 403 541" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
			<g transform="matrix(1,0,0,1,-2738.26,-95)">
				<g transform="matrix(1.62412,0,0,1,0,0)">
					<g transform="matrix(1,0,0,1,992.539,0)">
						<g transform="matrix(0.615719,0,0,1,0,0)">
							<g transform="matrix(1.59493,0,0,1.56803,697.355,-224.078)">
								<path
									d="M521.079,252.493L521.079,499.507L520.1,509.358L517.28,518.591L512.832,526.922L506.966,534.154L499.856,540.121L491.666,544.645L482.589,547.513L472.903,548.51L317.097,548.51L307.411,547.513L298.334,544.645L290.144,540.121L283.034,534.154L277.168,526.922L272.72,518.591L269.9,509.358L268.921,499.507L268.921,252.493L269.9,242.642L272.72,233.409L277.168,225.078L283.034,217.846L290.144,211.879L298.334,207.355L307.411,204.487L317.097,203.49L472.903,203.49L482.589,204.487L491.666,207.355L499.856,211.879L506.966,217.846L512.832,225.078L517.28,233.409L520.1,242.642L521.079,252.493ZM496,252.493C496,239.527 485.651,229 472.903,229L317.097,229C304.349,229 294,239.527 294,252.493L294,499.507C294,512.473 304.349,523 317.097,523L472.903,523C485.651,523 496,512.473 496,499.507L496,252.493Z"
									class="fill-current"
								/>
							</g>
							<g transform="matrix(0.500203,0,0,0.483037,715.296,185.81)">
								<path
									d="M1507.85,68.774C1507.85,68.774 1548.31,175.925 1469.17,352.273C1431.82,435.503 1452.46,549.204 1486.89,603.62C1502.99,629.066 1504.32,661.603 1490.35,688.367C1476.39,715.13 1449.38,731.809 1420,731.809L1029.5,731.809C998.07,731.809 969.554,712.744 956.619,683.081C921.275,602.032 923.734,546.666 941.517,482.478C954.042,437.263 977.806,385.861 997.254,303.817C1017.62,217.919 967.113,141.167 967.113,141.167C950.644,115.772 949.036,83.044 962.931,56.049C976.826,29.054 1003.96,12.191 1033.5,12.191L1432,12.191C1466.41,12.191 1496.95,34.98 1507.85,68.774ZM1432,95L1033.5,95C1033.5,95 1103.51,202.947 1074.92,323.557C1035.36,490.441 978.86,532.874 1029.5,649L1420,649C1374.58,577.204 1347.37,427.186 1396.65,317.373C1458.94,178.565 1432,95 1432,95Z"
									class="fill-current"
								/>
							</g>
						</g>
					</g>
				</g>
			</g>
		</svg>
	{/if}
		{/if}
	</div>
{/if}
